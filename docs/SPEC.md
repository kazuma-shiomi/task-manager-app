# タスク管理アプリ 仕様書

## 概要

期限・状態・検索機能を備えたシンプルなタスク管理アプリケーション。

## 技術スタック

- **フロントエンド**: TypeScript + React (Vite)
- **スタイリング**: CSS Modules
- **データ永続化**: LocalStorage
- **テスト**: Vitest + React Testing Library

---

## 機能仕様

### 1. タスクのデータ構造

```typescript
interface Task {
  id: string;           // UUID
  title: string;        // タスク名（必須、1-100文字）
  dueDate: string | null; // 期限（ISO 8601形式、nullは期限なし）
  status: TaskStatus;   // 状態
  createdAt: string;    // 作成日時
  updatedAt: string;    // 更新日時
}

type TaskStatus = 'todo' | 'in_progress' | 'done';
```

### 2. タスク操作

#### 2.1 タスク追加
- タスク名は必須（1-100文字）
- 期限は任意（未来の日付のみ許可）
- 初期状態は `todo`
- 追加時に `createdAt` と `updatedAt` を設定

#### 2.2 タスク編集
- タスク名、期限、状態を変更可能
- 編集時に `updatedAt` を更新

#### 2.3 タスク削除
- 確認ダイアログなしで即削除
- 削除後はリストから即座に消える

### 3. 状態管理

| 状態 | 表示名 | 説明 |
|------|--------|------|
| `todo` | 未着手 | 初期状態 |
| `in_progress` | 進行中 | 作業中 |
| `done` | 完了 | 完了済み |

- 状態はドロップダウンで変更可能
- 状態ごとに視覚的な区別（色分け）

### 4. 期限管理

- 日付ピッカーで期限を設定
- 期限表示形式: `YYYY/MM/DD`
- 期限切れタスクは赤色でハイライト
- 期限なしタスクは「期限なし」と表示

### 5. 検索・フィルタ

#### 5.1 テキスト検索
- タスク名を部分一致で検索
- 大文字・小文字を区別しない
- リアルタイム検索（入力と同時に絞り込み）

#### 5.2 状態フィルタ
- 「すべて」「未着手」「進行中」「完了」でフィルタ
- 検索とフィルタは併用可能

### 6. データ永続化

- LocalStorageに保存
- キー名: `task-manager-tasks`
- アプリ起動時に自動読み込み
- 変更時に自動保存

---

## UI仕様

### レイアウト

```
┌─────────────────────────────────────────┐
│  タスク管理                              │
├─────────────────────────────────────────┤
│  [検索入力] [状態フィルタ ▼]             │
├─────────────────────────────────────────┤
│  [タスク名入力] [期限入力] [追加ボタン]    │
├─────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐│
│  │ □ タスク1  | 2026/01/15 | 未着手 ▼ │✕││
│  ├─────────────────────────────────────┤│
│  │ □ タスク2  | 期限なし   | 進行中 ▼ │✕││
│  └─────────────────────────────────────┘│
└─────────────────────────────────────────┘
```

### 色仕様

| 要素 | 色 |
|------|-----|
| 未着手 | グレー (#6b7280) |
| 進行中 | 青 (#3b82f6) |
| 完了 | 緑 (#22c55e) |
| 期限切れ | 赤 (#ef4444) |

---

## 受け入れ基準

### タスク追加
- [ ] 空のタスク名では追加できない
- [ ] 100文字を超えるタスク名では追加できない
- [ ] 過去の日付は期限として設定できない
- [ ] 追加後、入力欄がクリアされる

### タスク編集
- [ ] タスク名をインライン編集できる
- [ ] 状態をドロップダウンで変更できる
- [ ] 期限を変更できる

### タスク削除
- [ ] 削除ボタンでタスクを削除できる
- [ ] 削除後、リストが即座に更新される

### 検索
- [ ] 入力と同時にリストが絞り込まれる
- [ ] 大文字小文字を区別しない
- [ ] 検索をクリアすると全件表示される

### フィルタ
- [ ] 状態でフィルタリングできる
- [ ] 検索とフィルタを併用できる

### データ永続化
- [ ] ページをリロードしてもデータが保持される
- [ ] 別タブで開いても同じデータが表示される
